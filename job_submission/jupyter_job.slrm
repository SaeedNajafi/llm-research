#!/bin/bash
#SBATCH --job-name=llm-jupyter
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-gpu=4
#SBATCH --mem=16G
#SBATCH --gres=gpu:2
#SBATCH --output=llm-jupyter.%j.out
#SBATCH --error=llm-jupyter.%j.err
#SBATCH --partition=a40
#SBATCH --qos=normal
#SBATCH --open-mode=append
#SBATCH --wait-all-nodes=1
#SBATCH --time=04:00:00

date;hostname;pwd

module load python/3.10.12 cuda-11.8
source ${PWD}/llm-env/bin/activate
export PATH=${PWD}/llm-env/bin:$PATH
export CUDA_HOME=/pkgs/cuda-11.8
export TRITON_PTXAS_PATH=/pkgs/cuda-11.8/bin/ptxas
export XDG_RUNTIME_DIR=""
jupyter lab --ip 0.0.0.0 --port 8700
